# دليل نشر الموقع على الاستضافة المشتركة

## الخطوات المطلوبة قبل النشر

### 1. إعداد قاعدة البيانات
- قم بإنشاء قاعدة بيانات MySQL جديدة في لوحة تحكم الاستضافة
- احفظ معلومات الاتصال: اسم الخادم، اسم المستخدم، كلمة المرور، اسم قاعدة البيانات

### 2. تحديث ملف البيئة
قم بتحديث الملف `.env.production` بمعلومات الاستضافة الخاصة بك:

```env
# معلومات قاعدة البيانات
DB_HOST=localhost  # أو عنوان خادم قاعدة البيانات
DB_USER=your_actual_db_username
DB_PASSWORD=your_actual_db_password
DB_NAME=your_actual_db_name

# معلومات النطاق
FRONTEND_URL=https://yourdomain.com
DOMAIN_URL=https://yourdomain.com
```

### 3. رفع الملفات
يمكنك استخدام إحدى الطرق التالية:

#### الطريقة الأولى: استخدام Git مع cPanel
1. ادفع الكود إلى مستودع Git
2. استخدم Git في cPanel لسحب الكود
3. سيتم تشغيل `.cpanel.yml` تلقائياً

#### الطريقة الثانية: الرفع اليدوي
1. قم ببناء المشروع محلياً: `npm run build`
2. ارفع محتويات مجلد `dist` إلى `public_html`
3. ارفع الملفات التالية إلى `public_html`:
   - `server.js`
   - `package.json`
   - `package-lock.json`
   - `.env.production` (وأعد تسميته إلى `.env`)
   - `.htaccess`
   - مجلد `database/`

### 4. تثبيت التبعيات
في Terminal الخاص بـ cPanel:
```bash
cd public_html
npm install --production
```

### 5. إعداد قاعدة البيانات
```bash
node database/setup.js init
```

### 6. تشغيل الخادم
```bash
node server.js
```

## الميزات المحسنة للاستضافة المشتركة

### 1. ملف .htaccess
- دعم React Router
- ضغط الملفات
- تخزين مؤقت للأصول الثابتة
- رؤوس الأمان

### 2. تحسينات الخادم
- إدارة أفضل للاتصالات
- معالجة محسنة للأخطاء
- دعم البروكسي
- إغلاق آمن

### 3. تحسينات قاعدة البيانات
- عدد اتصالات محدود للإنتاج
- إعادة الاتصال التلقائي
- مهلة زمنية محسنة

## استكشاف الأخطاء

### مشكلة: الموقع لا يعمل
- تأكد من أن Node.js مثبت على الخادم
- تحقق من صحة معلومات قاعدة البيانات
- راجع سجلات الأخطاء في cPanel

### مشكلة: React Router لا يعمل
- تأكد من وجود ملف `.htaccess`
- تحقق من تفعيل mod_rewrite

### مشكلة: قاعدة البيانات لا تتصل
- تأكد من صحة معلومات الاتصال
- تحقق من أن قاعدة البيانات تم إنشاؤها
- راجع صلاحيات المستخدم

## ملاحظات مهمة

1. **الأمان**: لا تنس تحديث JWT_SECRET و SESSION_SECRET بقيم قوية
2. **SSL**: فعل شهادة SSL للحصول على HTTPS
3. **النسخ الاحتياطي**: قم بعمل نسخة احتياطية من قاعدة البيانات بانتظام
4. **المراقبة**: راقب استخدام الموارد والأداء

## الدعم
في حالة وجود مشاكل، تحقق من:
- سجلات الأخطاء في cPanel
- إعدادات Node.js في الاستضافة
- صلاحيات الملفات والمجلدات